---
// API Reference page using Scalar
const title = 'API Reference';
const description = 'Interactive API documentation for the Cyoda platform';

// Read URL parameters for configuration
const url = new URL(Astro.request.url);
const theme = url.searchParams.get('theme') || 'light';
const layout = url.searchParams.get('layout') || 'modern';
const hideModels = url.searchParams.get('hideModels') === 'true';
const showSidebar = url.searchParams.get('showSidebar') !== 'false'; // default true
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title} | Cyoda Documentation</title>
    <link rel="icon" href="/favicon.svg" sizes="any" />
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, sans-serif;
      }
      .main-content {
        width: 100%;
        height: 100vh;
      }
    </style>
  </head>
  <body>
    <main class="main-content">
      <div id="api-reference"></div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference@latest"></script>

    <script
    id="api-reference"
    type="application/json"
    data-configuration={JSON.stringify({
        spec: {
            url: "/openapi/openapi.json"
        },
        theme: theme,
        layout: layout,
        hideModels: hideModels,
        showSidebar: showSidebar
    })}>
    </script>
  </body>
</html>
